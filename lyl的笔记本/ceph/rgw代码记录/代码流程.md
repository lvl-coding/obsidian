|   |
|---|
|```  <br>init_bucket  <br>store-**>**svc**()->**sysobj-**>**init_obj_ctx**();**  <br>store-**>**getRados**()->**get_bucket_info**()** or store-**>**getRados**()->**get_bucket_instance_info**(**ï¼‰  <br>rgw_remove_object  <br>store-**>**getRados**()->**delete_obj**()**  <br>If **(**params**.**versioning_status **&** BUCKET_VERSIONED **\|** explicit_marker_version**)**  <br>**if** **(**instance**.**empty**() \|** explicit_marker_version**)**  <br>**if** **((**params**.**versioning_status **&** BUCKET_VERSIONS_SUSPENDED**) ==** **0****) {**  <br>store-**>**gen_rand_obj_instance_name**(&**marker**);**  <br>**else**  <br>store-**>**set_olh**()**  <br>get_obj_state**()**  <br>olh_init_modification**()**  <br>olh_init_modification_impl**()**  <br>setxattr**()**  <br>RGW_ATTR_ID_TAG  <br>RGW_ATTR_OLH_ID_TAG  <br>RGW_ATTR_OLH_VER  <br>bucket_index_link_olh**()**  <br>**if** **(**ret **<** **0****)**  <br>repair_olh**()**  <br>store-**>**bi_get_instance**()**  <br>store-**>**unlink_obj_instance**()**  <br>fi  <br>target-**>**get_bucket_shard**()**  <br>store-**>**svc**.**datalog_rados-**>**add_entry**()**  <br>fi  <br>store-**>**get_obj_head_ref**()**  <br>target-**>**get_state**()**  <br>**if** **(!**real_clock**::**is_zero**(**params**.**unmod_since**)) {**  <br>store-**>**cls_obj_check_mtime**()**  <br>Fi  <br>target-**>**prepare_atomic_modification**()**  <br>index_op**.**prepare**(**CLS_RGW_OP_DEL**, &**state-**>**write_tag**,** y**);**  <br>store-**>**remove_rgw_head_obj**(**op**);**  <br>rgw_rados_operate**()**  <br>**if** **(****r** **>=** **0****)**  <br>index_op**.**complete_del**()**  <br>target-**>**complete_atomic_modification**();**  <br>**else**  <br>index_op**.**cancel**()**  <br>**if** **(**need_invalidate**)**  <br>target-**>**invalidate_state**();**  <br>store-**>**quota_handler-**>**update_stats**()**  <br>**`**``|